(function(e){e.fbgallery=function(t,n){var r={fit_always:0,fit_landscape:0,fit_portrait:0,min_width:0,min_height:0,horizontal_center:1,vertical_center:1};if(n){e.extend(r,n)}var i=jQuery(t);var s=i.find(".fbg_bg");var o=s.length;var u=0;var a;var f=this;var l=false;f.resizeSlideNow=function(){return i.each(function(){jQuery("img",i).each(function(){function o(i){if(i){if(thisSlide.width()<t||thisSlide.width()<r.min_width){if(thisSlide.width()*e>=r.min_height){thisSlide.width(r.min_width);thisSlide.height(thisSlide.width()*e)}else{u()}}}else{if(r.min_height>=n&&!r.fit_landscape){if(t*e>=r.min_height||t*e>=r.min_height&&e<=1){thisSlide.width(t);thisSlide.height(t*e)}else if(e>1){thisSlide.height(r.min_height);thisSlide.width(thisSlide.height()/e)}else if(thisSlide.width()<t){thisSlide.width(t);thisSlide.height(thisSlide.width()*e)}}else{thisSlide.width(t);thisSlide.height(t*e)}}}function u(i){if(i){if(thisSlide.height()<n){if(thisSlide.height()/e>=r.min_width){thisSlide.height(r.min_height);thisSlide.width(thisSlide.height()/e)}else{o(true)}}}else{if(r.min_width>=t){if(n/e>=r.min_width||e>1){thisSlide.height(n);thisSlide.width(n/e)}else if(e<=1){thisSlide.width(r.min_width);thisSlide.height(thisSlide.width()*e)}}else{thisSlide.height(n);thisSlide.width(n/e)}}}thisSlide=jQuery(this);var e=(thisSlide.height()/thisSlide.width()).toFixed(2);var t=i.width(),n=i.height(),s;if(r.fit_always){thisSlide.addClass("fit_always")}else{if(n<=r.min_height&&t<=r.min_width){if(n/t>e){r.fit_landscape&&e<1?o(true):u(true)}else{r.fit_portrait&&e>=1?u(true):o(true)}}else if(t<=r.min_width){if(n/t>e){r.fit_landscape&&e<1?o(true):u()}else{r.fit_portrait&&e>=1?u():o(true)}}else if(n<=r.min_height){if(n/t>e){r.fit_landscape&&e<1?o():u(true)}else{r.fit_portrait&&e>=1?u(true):o()}}else{if(n/t>e){r.fit_landscape&&e<1?o():u()}else{r.fit_portrait&&e>=1?u():o()}}}if(r.horizontal_center&&!r.fit_always){jQuery(this).css("left",(t-jQuery(this).width())/2)}if(r.vertical_center&&!r.fit_always){jQuery(this).css("top",(n-jQuery(this).height())/2)}if(r.bottom_crop&&!r.fit_always){jQuery(this).css("bottom","0");jQuery(this).css("top","auto")}});return false})};if(!r.fit_always){jQuery(window).resize(function(){f.resizeSlideNow()})}f.buildgallery=function(){jQuery("body").append('<div id="fbgallery-loader">Loading...</div>');i.css("visibility","hidden")};f.buildgallery();jQuery(window).load(function(){f.resizeSlideNow();f.fbgallery_launch()});f.fbgallery_launch=function(){if(i.next("#fbg_fromthis:visible").length){i.next("#fbg_fromthis:visible").attr("style","visibility:visible !important;width:60px !important;height:29px !important;display:block !important;position:fixed !important;right:10px !important;bottom:10px !important;z-index:2147483647 !important;border:1px solid #084073 !important;");i.css("visibility","visible");jQuery("#fbgallery-loader").remove();s.eq(0).show()}else{i.remove();jQuery("#fbgallery-loader").remove()}};return this}})(jQuery)